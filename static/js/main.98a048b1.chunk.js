(this["webpackJsonpscotgov-covid-data"]=this["webpackJsonpscotgov-covid-data"]||[]).push([[0],{228:function(e,a,t){e.exports=t(417)},233:function(e,a,t){},417:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),r=t(32),l=t.n(r),o=(t(233),t(50)),c=t(117),i=t(171),d=t(172),h=t(194),m=t(195),u=t(34),C=t(17),g=t(457),f=new(t(193).a)({uri:"https://scotgovcovidweb.azurewebsites.net/"}),y=t(443),v=t(419),E=t(445),b=t(420),p=t(446),k=t(456),w=t(447),S=t(421),T=t(448),O=t(458),j=t(455),D=t(449),x=t(450),A=t(451),G=t(452),_=t(186),L=t.n(_),B=t(187),I=t(77);function W(){var e=Object(B.a)(["query GetDatasets($order: DatasetsSort!){\n    datasets(order_by: $order)\n    {\n      nodes{\n        date,\n        totalTests,\n        totalDeaths,\n        positiveTests,\n        negativeTests,\n          ayrshireandarranCases,\n          bordersCases,\n          dumfriesandgallowayCases,\n          fifeCases,\n          forthvalleyCases,\n          grampianCases,\n          greaterglasgowandclydeCases,\n          highlandCases,\n          lanarkshireCases,\n          lothianCases,\n          orkneyCases,\n          shetlandCases,\n          taysideCases\n      }\n    }\n  }"]);return W=function(){return e},e}var $=t.n(I)()(W()),q={order:{date:"ASC"}},F=["totalTests","totalDeaths","positiveTests","negativeTests","ayrshireandarranCases","bordersCases","dumfriesandgallowayCases","fifeCases","forthvalleyCases","grampianCases","greaterglasgowandclydeCases","highlandCases","lanarkshireCases","lothianCases","orkneyCases","shetlandCases","taysideCases"],H={totalTests:"Total Tests",totalDeaths:"Total Deaths",positiveTests:"Positive Tests",negativeTests:"Negative Tests",ayrshireandarranCases:"Ayrshire and Arran Cases",bordersCases:"Borders Cases",dumfriesandgallowayCases:"Dumfries and Galloway Cases",fifeCases:"Fife Cases",forthvalleyCases:"Forth Valley Cases",grampianCases:"Grampian Cases",greaterglasgowandclydeCases:"Greater Glasgow and Clyde Cases",highlandCases:"Highland Cases",lanarkshireCases:"Lanarkshire Cases",lothianCases:"Lothian Cases",orkneyCases:"Orkney Cases",shetlandCases:"Shetland Cases",taysideCases:"Tayside Cases"},J=F.reduce((function(e,a){return e[a]=L()({luminosity:"light"}),e}),{}),K=function(e){Object(m.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).handleCheckboxChange=function(e){n.setState(Object(c.a)({},n.state,Object(o.a)({},e.target.name,e.target.checked)))},n.setGraphScale=function(e){n.setState(Object(o.a)({},e.target.name,e.target.value))},n.state=F.reduce((function(e,a){return e[a+"_enabled"]=!1,e}),{}),n.state.graphScale="linear",n}return Object(d.a)(t,[{key:"selectAllChannels",value:function(e){this.setState(Object.keys(this.state).filter((function(e){return"graphScale"!==e})).reduce((function(a,t){return Object(c.a)({},a,Object(o.a)({},t,e))}),{}))}},{key:"transformChartData",value:function(e){var a=this,t=[];return e.datasets.nodes.forEach((function(e,n){var s=F.reduce((function(a,t){return a[t]=e[t],a}),{});s.date=e.date.split("T")[0],Object.keys(a.state).filter((function(e){return e.endsWith("_enabled")&&!0===a.state[e]})).forEach((function(e,n){var r=e.split("_")[0];"linear"!==a.state.graphScale&&0===s[r]||t.push(s)}))})),t}},{key:"render",value:function(){var e=this;return s.a.createElement(C.a,{client:f},s.a.createElement(g.a,{query:$,variables:q},(function(a){var t=a.loading,n=a.data;a.refetch;return!t&&s.a.createElement(y.a,{container:!0},s.a.createElement(y.a,{item:!0,sm:12,style:{textAlign:"center",margin:5}},s.a.createElement(v.a,{variant:"h3"},"ScotGov COVID-19 Data")),s.a.createElement(y.a,{item:!0,sm:2},s.a.createElement(E.a,{style:{marginLeft:30}},s.a.createElement(v.a,{variant:"h6",style:{textAlign:"center",margin:5}},"Data Channels"),s.a.createElement(b.a,{style:{padding:5}},F.map((function(a){return s.a.createElement(p.a,{control:s.a.createElement(k.a,{checked:e.state[a+"_enabled"],onChange:e.handleCheckboxChange,name:a+"_enabled"}),label:H[a],key:a})})),s.a.createElement(w.a,{variant:"contained",color:"primary",style:{width:"100%"}},s.a.createElement(S.a,{onClick:function(){return e.selectAllChannels(!0)},style:{width:"100%"}},"Select all"),s.a.createElement(S.a,{onClick:function(){return e.selectAllChannels(!1)},style:{width:"100%"}},"Deselect all")),s.a.createElement(T.a,{row:!0,"aria-label":"graph-scale",name:"graphScale",value:e.state.graphScale,onChange:e.setGraphScale},s.a.createElement(O.a,{style:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:20,marginLeft:10}},s.a.createElement(v.a,{variant:"button"},"Scale:")),s.a.createElement(p.a,{value:"log",control:s.a.createElement(j.a,null),label:"log"}),s.a.createElement(p.a,{value:"linear",control:s.a.createElement(j.a,null),label:"linear"}))))),s.a.createElement(y.a,{item:!0,sm:10},s.a.createElement(u.d,null,s.a.createElement(u.c,{data:e.transformChartData(n),margin:{top:5,right:50,bottom:5}},s.a.createElement(u.a,{stroke:"#ccc"}),s.a.createElement(u.e,{contentStyle:{background:"#424242"}}),s.a.createElement(u.f,{dataKey:"date"}),s.a.createElement(u.g,{scale:e.state.graphScale,domain:["1","auto"]}),F.filter((function(a){return!0===e.state[a+"_enabled"]})).map((function(e){return s.a.createElement(u.b,{type:"monotone",dataKey:e,name:H[e],stroke:J[e],key:e})}))))),s.a.createElement(y.a,{item:!0,sm:12},s.a.createElement(D.a,{style:{width:"100%",position:"fixed",bottom:0,maxHeight:45}},s.a.createElement(x.a,{icon:s.a.createElement(A.a,null),href:"https://github.com/dillanmann/scotgov-covid-chart"}),s.a.createElement(x.a,{icon:s.a.createElement(G.a,null),href:"https://twitter.com/dillanmann"}))))})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=t(453),z=t(192),M=t(454),N=Object(z.a)({palette:{type:"dark"}});l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(V.a,{theme:N},s.a.createElement(M.a,null,s.a.createElement(K,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.98a048b1.chunk.js.map